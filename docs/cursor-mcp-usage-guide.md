# MCP åœ¨ Cursor ä¸­çš„ä½¿ç”¨æŒ‡å—

## ğŸ¯ ä»€ä¹ˆæ˜¯ MCP åœ¨ Cursor ä¸­çš„ä½œç”¨

MCPï¼ˆModel Context Protocolï¼‰åœ¨ Cursor ä¸­å…è®¸ AI åŠ©æ‰‹ï¼š
- è®¿é—®å¤–éƒ¨å·¥å…·å’Œèµ„æº
- è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯
- æ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼ˆå¦‚æ–‡ä»¶æ“ä½œã€API è°ƒç”¨ç­‰ï¼‰

---

## ğŸ“‹ åŸºç¡€ä½¿ç”¨æ­¥éª¤

### 1. é…ç½® MCP æœåŠ¡å™¨

#### æ‰¾åˆ°é…ç½®æ–‡ä»¶

**macOS/Linux**ï¼š
```bash
~/.cursor/mcp.json
```

**Windows**ï¼š
```
C:\Users\YourUsername\.cursor\mcp.json
```

#### ç¼–è¾‘é…ç½®æ–‡ä»¶

```json
{
  "mcpServers": {
    "fetch": {
      "type": "streamable_http",
      "url": "https://mcp.api-inference.modelscope.net/d34794140aad40/mcp",
      "name": "fetch",
      "headers": {}
    }
  }
}
```

#### æ·»åŠ ä½ çš„é¡¹ç›® MCP Server

å¦‚æœä½ æƒ³è¿æ¥è‡ªå·±çš„é¡¹ç›®ï¼š

```json
{
  "mcpServers": {
    "fetch": {
      "type": "streamable_http",
      "url": "https://mcp.api-inference.modelscope.net/d34794140aad40/mcp",
      "name": "fetch",
      "headers": {}
    },
    "my-ai-agent": {
      "type": "streamable_http",
      "url": "http://localhost:8080/api/mcp",
      "name": "My AI Agent",
      "headers": {
        "Authorization": "Bearer your-token"
      }
    }
  }
}
```

---

### 2. åœ¨ Cursor ä¸­å¯ç”¨ MCP æœåŠ¡å™¨

#### æ­¥éª¤

1. **æ‰“å¼€ Cursor è®¾ç½®**
   - ç‚¹å‡»å·¦ä¸‹è§’è®¾ç½®å›¾æ ‡
   - æˆ–ä½¿ç”¨å¿«æ·é”® `Cmd/Ctrl + ,`

2. **æ‰¾åˆ° MCP è®¾ç½®**
   - åœ¨è®¾ç½®ä¸­æœç´¢ "MCP" æˆ– "Model Context Protocol"
   - æˆ–ç›´æ¥å¯¼èˆªåˆ°ï¼š`Tools & MCP` â†’ `Installed MCP Servers`

3. **æŸ¥çœ‹å·²å®‰è£…çš„æœåŠ¡å™¨**
   - ä½ ä¼šçœ‹åˆ°é…ç½®çš„ MCP æœåŠ¡å™¨åˆ—è¡¨
   - æ¯ä¸ªæœåŠ¡å™¨æ—è¾¹æœ‰ä¸€ä¸ªå¼€å…³

4. **å¯ç”¨æœåŠ¡å™¨**
   - å°†å¼€å…³åˆ‡æ¢åˆ°**ç»¿è‰²ï¼ˆONï¼‰**
   - ç»¿è‰² = å·²å¯ç”¨ï¼Œç°è‰² = å·²ç¦ç”¨

#### ç•Œé¢è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Installed MCP Servers          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [F] fetch                      â”‚
â”‚     1 tools, 1 pr               â”‚
â”‚     [â—] ON                      â”‚ â† ç»¿è‰²å¼€å…³
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [+] New MCP Server             â”‚
â”‚     Add a Custom MCP Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. ä½¿ç”¨ MCP åŠŸèƒ½

#### æ–¹å¼ 1ï¼šç›´æ¥å¯¹è¯ä½¿ç”¨

**ç¤ºä¾‹å¯¹è¯**ï¼š

```
ä½ ï¼šå¸®æˆ‘è·å–æœ€æ–°çš„é¡¹ç›®æ–‡æ¡£

AIï¼ˆä½¿ç”¨ MCPï¼‰ï¼šæˆ‘ä¼šé€šè¿‡ fetch MCP æœåŠ¡å™¨è·å–æ–‡æ¡£...
[è°ƒç”¨ MCP å·¥å…·]
[è¿”å›ç»“æœ]
```

#### æ–¹å¼ 2ï¼šæ˜ç¡®æŒ‡å®šä½¿ç”¨ MCP

```
ä½ ï¼šä½¿ç”¨ fetch MCP æœåŠ¡å™¨æœç´¢ç›¸å…³ä¿¡æ¯

AIï¼šå¥½çš„ï¼Œæˆ‘ä¼šä½¿ç”¨ fetch MCP æœåŠ¡å™¨...
```

#### æ–¹å¼ 3ï¼šæŸ¥çœ‹å¯ç”¨å·¥å…·

```
ä½ ï¼šfetch MCP æœåŠ¡å™¨æœ‰å“ªäº›å¯ç”¨å·¥å…·ï¼Ÿ

AIï¼šfetch MCP æœåŠ¡å™¨æä¾›ä»¥ä¸‹å·¥å…·ï¼š
1. fetch_url - è·å–ç½‘é¡µå†…å®¹
2. fetch_resource - è·å–èµ„æº
...
```

---

## ğŸ”§ å®é™…ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šè·å–ç½‘é¡µå†…å®¹

**å¯¹è¯ç¤ºä¾‹**ï¼š

```
ä½ ï¼šå¸®æˆ‘è·å– https://example.com çš„å†…å®¹

AIï¼šæˆ‘ä¼šä½¿ç”¨ fetch MCP æœåŠ¡å™¨è·å–ç½‘é¡µå†…å®¹...
[è°ƒç”¨ fetch_url å·¥å…·]
[è¿”å›ç½‘é¡µå†…å®¹]
```

**èƒŒåå‘ç”Ÿçš„äº‹**ï¼š
1. AI è¯†åˆ«éœ€è¦è·å–ç½‘é¡µå†…å®¹
2. é€‰æ‹©ä½¿ç”¨ `fetch` MCP æœåŠ¡å™¨
3. è°ƒç”¨ `fetch_url` å·¥å…·
4. è¿”å›ç»“æœç»™ä½ 

---

### åœºæ™¯ 2ï¼šè®¿é—®ä½ çš„é¡¹ç›® MCP Server

å¦‚æœä½ é…ç½®äº†è‡ªå·±çš„é¡¹ç›® MCP Serverï¼š

**å¯¹è¯ç¤ºä¾‹**ï¼š

```
ä½ ï¼šä»æˆ‘çš„ AI Agent é¡¹ç›®ä¸­è·å–å¯¹è¯ä¸Šä¸‹æ–‡

AIï¼šæˆ‘ä¼šè¿æ¥ä½ çš„ AI Agent MCP æœåŠ¡å™¨...
[è°ƒç”¨ my-ai-agent MCP]
[è·å–ä¸Šä¸‹æ–‡]
[è¿”å›ç»“æœ]
```

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "mcpServers": {
    "my-ai-agent": {
      "type": "streamable_http",
      "url": "http://localhost:8080/api/mcp",
      "name": "My AI Agent",
      "headers": {
        "Authorization": "Bearer your-token"
      }
    }
  }
}
```

---

### åœºæ™¯ 3ï¼šä½¿ç”¨å¤šä¸ª MCP æœåŠ¡å™¨

**é…ç½®å¤šä¸ªæœåŠ¡å™¨**ï¼š

```json
{
  "mcpServers": {
    "fetch": {
      "type": "streamable_http",
      "url": "https://mcp.api-inference.modelscope.net/d34794140aad40/mcp",
      "name": "Fetch Server"
    },
    "filesystem": {
      "type": "stdio",
      "command": "node",
      "args": ["/path/to/filesystem-mcp-server.js"],
      "name": "File System"
    },
    "my-project": {
      "type": "streamable_http",
      "url": "http://localhost:8080/api/mcp",
      "name": "My Project"
    }
  }
}
```

**ä½¿ç”¨**ï¼š

```
ä½ ï¼šå¸®æˆ‘è·å–ç½‘é¡µå†…å®¹ï¼Œç„¶åä¿å­˜åˆ°æ–‡ä»¶

AIï¼š
1. ä½¿ç”¨ fetch MCP è·å–ç½‘é¡µå†…å®¹
2. ä½¿ç”¨ filesystem MCP ä¿å­˜åˆ°æ–‡ä»¶
[æ‰§è¡Œæ“ä½œ]
[è¿”å›ç»“æœ]
```

---

## ğŸ› ï¸ MCP æœåŠ¡å™¨ç±»å‹è¯¦è§£

### 1. HTTP ç±»å‹ï¼ˆstreamable_httpï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šè¿œç¨‹æœåŠ¡å™¨ã€API æœåŠ¡

**é…ç½®**ï¼š
```json
{
  "type": "streamable_http",
  "url": "https://api.example.com/mcp",
  "headers": {
    "Authorization": "Bearer token"
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… è¿æ¥è¿œç¨‹æœåŠ¡å™¨
- âœ… æ”¯æŒæµå¼æ•°æ®ä¼ è¾“
- âœ… é€‚åˆäº‘æœåŠ¡

---

### 2. æ ‡å‡†è¾“å…¥è¾“å‡ºç±»å‹ï¼ˆstdioï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šæœ¬åœ°è¿›ç¨‹ã€å‘½ä»¤è¡Œå·¥å…·

**é…ç½®**ï¼š
```json
{
  "type": "stdio",
  "command": "python",
  "args": ["/path/to/mcp-server.py"],
  "env": {
    "API_KEY": "your-key"
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… è¿è¡Œæœ¬åœ°è¿›ç¨‹
- âœ… é€‚åˆæœ¬åœ°å·¥å…·
- âœ… å¯ä»¥ä¼ é€’ç¯å¢ƒå˜é‡

**ç¤ºä¾‹**ï¼šæ–‡ä»¶ç³»ç»Ÿ MCP æœåŠ¡å™¨

```json
{
  "filesystem": {
    "type": "stdio",
    "command": "node",
    "args": ["/path/to/filesystem-server.js"],
    "name": "File System"
  }
}
```

---

### 3. SSE ç±»å‹ï¼ˆsseï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šå®æ—¶æ•°æ®æµã€æœåŠ¡å™¨æ¨é€

**é…ç½®**ï¼š
```json
{
  "type": "sse",
  "url": "https://api.example.com/mcp/stream",
  "headers": {
    "Authorization": "Bearer token"
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… æœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ•°æ®
- âœ… å®æ—¶æ›´æ–°
- âœ… é€‚åˆç›‘æ§ã€æ—¥å¿—ç­‰åœºæ™¯

---

## ğŸ’¡ é«˜çº§ä½¿ç”¨æŠ€å·§

### 1. æŸ¥çœ‹ MCP æœåŠ¡å™¨çŠ¶æ€

**åœ¨ Cursor ä¸­**ï¼š
- æ‰“å¼€ `Tools & MCP` â†’ `Installed MCP Servers`
- æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€ï¼š
  - ç»¿è‰²å¼€å…³ = å·²å¯ç”¨
  - ç°è‰²å¼€å…³ = å·²ç¦ç”¨
  - é”™è¯¯å›¾æ ‡ = è¿æ¥å¤±è´¥

### 2. è°ƒè¯• MCP è¿æ¥

**æ£€æŸ¥é…ç½®**ï¼š
```bash
# æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat ~/.cursor/mcp.json

# éªŒè¯ JSON æ ¼å¼
# ä½¿ç”¨åœ¨çº¿ JSON éªŒè¯å™¨æˆ– jq å‘½ä»¤
```

**æµ‹è¯•è¿æ¥**ï¼š
```bash
# æµ‹è¯• HTTP MCP æœåŠ¡å™¨
curl https://mcp.api-inference.modelscope.net/d34794140aad40/mcp

# æµ‹è¯•æœ¬åœ° MCP æœåŠ¡å™¨
curl http://localhost:8080/api/mcp
```

### 3. æŸ¥çœ‹å¯ç”¨å·¥å…·å’Œèµ„æº

**åœ¨å¯¹è¯ä¸­è¯¢é—®**ï¼š

```
ä½ ï¼šfetch MCP æœåŠ¡å™¨æä¾›å“ªäº›å·¥å…·ï¼Ÿ

AIï¼šfetch MCP æœåŠ¡å™¨æä¾›ä»¥ä¸‹å·¥å…·ï¼š
- fetch_url: è·å–ç½‘é¡µå†…å®¹
- fetch_resource: è·å–èµ„æº
...

ä½ ï¼šæœ‰å“ªäº›å¯ç”¨çš„èµ„æºï¼Ÿ

AIï¼šå¯ç”¨çš„èµ„æºåŒ…æ‹¬ï¼š
- documents: æ–‡æ¡£åˆ—è¡¨
- contexts: ä¸Šä¸‹æ–‡åˆ—è¡¨
...
```

---

## ğŸ”— ä¸ä½ çš„é¡¹ç›®é›†æˆ

### è®©ä½ çš„é¡¹ç›®æˆä¸º MCP Server

#### 1. å®ç° MCP API ç«¯ç‚¹

åœ¨ä½ çš„é¡¹ç›®ä¸­æ·»åŠ  MCP ç«¯ç‚¹ï¼š

```java
@RestController
@RequestMapping("/api/mcp")
public class MCPController {
    
    @PostMapping("/tools/list")
    public List<Tool> listTools() {
        // è¿”å›å¯ç”¨å·¥å…·åˆ—è¡¨
    }
    
    @PostMapping("/tools/call")
    public ToolResult callTool(@RequestBody ToolRequest request) {
        // æ‰§è¡Œå·¥å…·è°ƒç”¨
    }
    
    @PostMapping("/resources/list")
    public List<Resource> listResources() {
        // è¿”å›å¯ç”¨èµ„æºåˆ—è¡¨
    }
    
    @PostMapping("/resources/read")
    public ResourceContent readResource(@RequestBody ResourceRequest request) {
        // è¯»å–èµ„æºå†…å®¹
    }
}
```

#### 2. åœ¨ Cursor ä¸­é…ç½®

```json
{
  "mcpServers": {
    "my-ai-agent": {
      "type": "streamable_http",
      "url": "http://localhost:8080/api/mcp",
      "name": "My AI Agent",
      "headers": {
        "Authorization": "Bearer your-token"
      }
    }
  }
}
```

#### 3. ä½¿ç”¨

```
ä½ ï¼šä»æˆ‘çš„ AI Agent è·å–å¯¹è¯å†å²

AIï¼šæˆ‘ä¼šè¿æ¥ä½ çš„ AI Agent MCP æœåŠ¡å™¨...
[è°ƒç”¨ MCP API]
[è¿”å›å¯¹è¯å†å²]
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: MCP æœåŠ¡å™¨è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼šå¼€å…³æ˜¾ç¤ºä¸ºç°è‰²æˆ–é”™è¯¯çŠ¶æ€

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. æ£€æŸ¥è®¤è¯å¤´ï¼ˆå¦‚æœéœ€è¦ï¼‰
4. æŸ¥çœ‹ Cursor æ—¥å¿—

### Q2: å·¥å…·ä¸å¯ç”¨

**é—®é¢˜**ï¼šAI è¯´æ‰¾ä¸åˆ°å·¥å…·

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ MCP æœåŠ¡å™¨å·²å¯ç”¨ï¼ˆç»¿è‰²å¼€å…³ï¼‰
2. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
3. æŸ¥çœ‹æœåŠ¡å™¨æä¾›çš„å·¥å…·åˆ—è¡¨

### Q3: å¦‚ä½•æ·»åŠ æ–°çš„ MCP æœåŠ¡å™¨

**æ­¥éª¤**ï¼š
1. ç¼–è¾‘ `~/.cursor/mcp.json`
2. æ·»åŠ æ–°æœåŠ¡å™¨é…ç½®
3. é‡å¯ Cursor æˆ–é‡æ–°åŠ è½½é…ç½®
4. åœ¨è®¾ç½®ä¸­å¯ç”¨æ–°æœåŠ¡å™¨

### Q4: æœ¬åœ° MCP æœåŠ¡å™¨è¿æ¥ä¸ä¸Š

**é—®é¢˜**ï¼šæœ¬åœ°æœåŠ¡å™¨æ— æ³•è¿æ¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤é˜²ç«å¢™è®¾ç½®
4. ä½¿ç”¨ `http://localhost:8080` è€Œä¸æ˜¯ `http://127.0.0.1:8080`

---

## ğŸ“š æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†

**å»ºè®®**ï¼š
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼ˆAPI Key ç­‰ï¼‰
- âœ… ä¸è¦å°† `mcp.json` æäº¤åˆ°å…¬å…±ä»£ç åº“
- âœ… ä¸ºä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®

**ç¤ºä¾‹**ï¼š
```json
{
  "mcpServers": {
    "my-server": {
      "type": "streamable_http",
      "url": "${MCP_SERVER_URL}",
      "headers": {
        "Authorization": "Bearer ${MCP_API_KEY}"
      }
    }
  }
}
```

### 2. é”™è¯¯å¤„ç†

**å»ºè®®**ï¼š
- âœ… é…ç½®å¤šä¸ªå¤‡ç”¨æœåŠ¡å™¨
- âœ… ä½¿ç”¨ `required = false` å…è®¸é™çº§
- âœ… ç›‘æ§æœåŠ¡å™¨çŠ¶æ€

### 3. æ€§èƒ½ä¼˜åŒ–

**å»ºè®®**ï¼š
- âœ… åªå¯ç”¨éœ€è¦çš„ MCP æœåŠ¡å™¨
- âœ… ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆå¦‚æœå¯èƒ½ï¼‰
- âœ… ç¼“å­˜å¸¸ç”¨èµ„æº

---

## ğŸ“ å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [MCP åè®®è§„èŒƒ](https://modelcontextprotocol.io/)
- [Cursor MCP æ–‡æ¡£](https://docs.cursor.com/)

### ç¤ºä¾‹ MCP æœåŠ¡å™¨

- [MCP æœåŠ¡å™¨ç¤ºä¾‹](https://github.com/modelcontextprotocol/servers)
- [ç¤¾åŒº MCP æœåŠ¡å™¨](https://github.com/topics/mcp-server)

---

## ğŸ“ æ€»ç»“

### å¿«é€Ÿå¼€å§‹

1. **é…ç½®**ï¼šç¼–è¾‘ `~/.cursor/mcp.json`
2. **å¯ç”¨**ï¼šåœ¨ Cursor è®¾ç½®ä¸­å¯ç”¨æœåŠ¡å™¨
3. **ä½¿ç”¨**ï¼šåœ¨å¯¹è¯ä¸­ç›´æ¥ä½¿ç”¨ï¼ŒAI ä¼šè‡ªåŠ¨è°ƒç”¨

### æ ¸å¿ƒæ¦‚å¿µ

- **MCP Server**ï¼šæä¾›å·¥å…·å’Œèµ„æºçš„æœåŠ¡å™¨
- **MCP Client**ï¼šCursor ç¼–è¾‘å™¨ï¼ˆè¿æ¥æœåŠ¡å™¨ï¼‰
- **å·¥å…·ï¼ˆToolsï¼‰**ï¼šMCP æœåŠ¡å™¨æä¾›çš„åŠŸèƒ½
- **èµ„æºï¼ˆResourcesï¼‰**ï¼šMCP æœåŠ¡å™¨æä¾›çš„æ•°æ®

### ä½ çš„é¡¹ç›®

- ä½ çš„é¡¹ç›®å¯ä»¥ä½œä¸º **MCP Server**
- åœ¨ Cursor ä¸­é…ç½®è¿æ¥
- AI åŠ©æ‰‹å¯ä»¥ä½¿ç”¨ä½ é¡¹ç›®çš„åŠŸèƒ½

---

## ğŸ”„ ä¸‹ä¸€æ­¥

1. **é…ç½®ä½ çš„é¡¹ç›® MCP Server**
   - å®ç° MCP API ç«¯ç‚¹
   - åœ¨ Cursor ä¸­é…ç½®è¿æ¥

2. **æ¢ç´¢æ›´å¤š MCP æœåŠ¡å™¨**
   - æŸ¥æ‰¾ç¤¾åŒºæä¾›çš„æœåŠ¡å™¨
   - å°è¯•ä¸åŒçš„å·¥å…·å’Œèµ„æº

3. **è‡ªå®šä¹‰å¼€å‘**
   - å¼€å‘è‡ªå·±çš„ MCP æœåŠ¡å™¨
   - é›†æˆåˆ°ä½ çš„å·¥ä½œæµä¸­

